\begin{code}
  \>[2]\AgdaFunction{SWAP}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaSymbol{∀}\AgdaSpace{}%
\AgdaBound{𝑿}\AgdaSpace{}%
\AgdaBound{𝒀}%
\>[83I]\AgdaSymbol{→}\<%
\\
\>[83I][@{}l@{\AgdaIndent{0}}]%
\>[17]\AgdaOperator{\AgdaFunction{⟪}}\AgdaSpace{}%
\AgdaFunction{𝒙}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{==}}%
\>[86I]\AgdaSymbol{(}\AgdaInductiveConstructor{𝑐𝑜𝑛𝑠𝑡}\AgdaSpace{}%
\AgdaBound{𝑿}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{∧}}\AgdaSpace{}%
\AgdaFunction{𝒚}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{==}}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaInductiveConstructor{𝑐𝑜𝑛𝑠𝑡}\AgdaSpace{}%
\AgdaBound{𝒀}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{⟫}}%
\>[66]\AgdaComment{-- Precondition}\<%
\\
\>[0]\<%
\\
\>[86I][@{}l@{\AgdaIndent{0}}]%
\>[28]\AgdaFunction{𝒛}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{:=}}\AgdaSpace{}%
\AgdaInductiveConstructor{𝑣𝑎𝑙}\AgdaSpace{}%
\AgdaFunction{𝒙}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{;}}\<%
\\
%
\>[28]\AgdaFunction{𝒙}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{:=}}\AgdaSpace{}%
\AgdaInductiveConstructor{𝑣𝑎𝑙}\AgdaSpace{}%
\AgdaFunction{𝒚}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{;}}\<%
\\
%
\>[28]\AgdaFunction{𝒚}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{:=}}\AgdaSpace{}%
\AgdaInductiveConstructor{𝑣𝑎𝑙}\AgdaSpace{}%
\AgdaFunction{𝒛}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{;}}\<%
\\
%
\\[\AgdaEmptyExtraSkip]%
%
\>[17]\AgdaOperator{\AgdaFunction{⟪}}\AgdaSpace{}%
\AgdaFunction{𝒙}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{==}}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaInductiveConstructor{𝑐𝑜𝑛𝑠𝑡}\AgdaSpace{}%
\AgdaBound{𝒀}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{∧}}\AgdaSpace{}%
\AgdaFunction{𝒚}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{==}}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaInductiveConstructor{𝑐𝑜𝑛𝑠𝑡}\AgdaSpace{}%
\AgdaBound{𝑿}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{⟫}}%
\>[65]\AgdaComment{-- Postcondition}\<%
\\
%
\>[2]\AgdaFunction{SWAP}\AgdaSpace{}%
\AgdaBound{𝑿}\AgdaSpace{}%
\AgdaBound{𝒀}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaFunction{∎}\<%
\\
\>[2][@{}l@{\AgdaIndent{0}}]%
\>[5]\AgdaKeyword{where}\<%
\\
\>[0]\<%
\\
%
\>[5]\AgdaComment{-- Reasoning backwards from Postcondition Q to Precondition P}\<%
\\
\>[0]\<%
\\
%
\>[5]\AgdaFunction{PRE}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaFunction{Assertion}\<%
\\
%
\>[5]\AgdaFunction{PRE}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaFunction{𝒙}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{==}}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaInductiveConstructor{𝑐𝑜𝑛𝑠𝑡}\AgdaSpace{}%
\AgdaBound{𝑿}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{∧}}\AgdaSpace{}%
\AgdaFunction{𝒚}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{==}}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaInductiveConstructor{𝑐𝑜𝑛𝑠𝑡}\AgdaSpace{}%
\AgdaBound{𝒀}\AgdaSymbol{)}\<%
\\
%
\\[\AgdaEmptyExtraSkip]%
%
\>[5]\AgdaFunction{POST}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaFunction{Assertion}\<%
\\
%
\>[5]\AgdaFunction{POST}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaFunction{𝒙}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{==}}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaInductiveConstructor{𝑐𝑜𝑛𝑠𝑡}\AgdaSpace{}%
\AgdaBound{𝒀}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{∧}}\AgdaSpace{}%
\AgdaFunction{𝒚}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{==}}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaInductiveConstructor{𝑐𝑜𝑛𝑠𝑡}\AgdaSpace{}%
\AgdaBound{𝑿}\AgdaSymbol{)}\<%
\\
\>[0]\<%
\\
%
\>[5]\AgdaFunction{A₁}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaFunction{Assertion}\<%
\\
%
\>[5]\AgdaFunction{A₁}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaSymbol{((}\AgdaFunction{sub}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaInductiveConstructor{𝑣𝑎𝑙}\AgdaSpace{}%
\AgdaFunction{𝒛}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaFunction{𝒚}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaInductiveConstructor{𝑣𝑎𝑙}\AgdaSpace{}%
\AgdaFunction{𝒙}\AgdaSymbol{))}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{==}}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaInductiveConstructor{𝑐𝑜𝑛𝑠𝑡}\AgdaSpace{}%
\AgdaBound{𝒀}\AgdaSymbol{))}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{∧}}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaSpace{}%
\AgdaFunction{𝒛}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{==}}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaInductiveConstructor{𝑐𝑜𝑛𝑠𝑡}\AgdaSpace{}%
\AgdaBound{𝑿}\AgdaSymbol{))}\<%
\\
\>[0]\<%
\\
%
\>[5]\AgdaFunction{s₁}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{⟪}}\AgdaSpace{}%
\AgdaFunction{A₁}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{⟫}}\AgdaSpace{}%
\AgdaFunction{𝒚}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{:=}}\AgdaSpace{}%
\AgdaInductiveConstructor{𝑣𝑎𝑙}\AgdaSpace{}%
\AgdaFunction{𝒛}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{;}}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{⟪}}\AgdaSpace{}%
\AgdaFunction{POST}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{⟫}}\<%
\\
%
\>[5]\AgdaFunction{s₁}\AgdaSpace{}%
\AgdaSymbol{=}%
\>[175I]\AgdaKeyword{let}\AgdaSpace{}%
\AgdaBound{Ψ}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaFunction{D0-Axiom-of-Assignment}\AgdaSpace{}%
\AgdaFunction{𝒚}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaInductiveConstructor{𝑣𝑎𝑙}\AgdaSpace{}%
\AgdaFunction{𝒛}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaFunction{POST}\AgdaSpace{}%
\AgdaKeyword{in}\AgdaSpace{}%
\AgdaFunction{go}\AgdaSpace{}%
\AgdaBound{Ψ}\<%
\\
\>[.][@{}l@{}]\<[175I]%
\>[10]\AgdaKeyword{where}\<%
\\
%
\>[10]\AgdaFunction{go}\AgdaSpace{}%
\AgdaSymbol{:}%
\>[187I]\AgdaOperator{\AgdaFunction{⟪}}\AgdaSpace{}%
\AgdaSymbol{((}\AgdaFunction{sub}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaInductiveConstructor{𝑣𝑎𝑙}\AgdaSpace{}%
\AgdaFunction{𝒛}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaFunction{𝒚}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaInductiveConstructor{𝑣𝑎𝑙}\AgdaSpace{}%
\AgdaFunction{𝒙}\AgdaSymbol{))}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{==}}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaInductiveConstructor{𝑐𝑜𝑛𝑠𝑡}\AgdaSpace{}%
\AgdaBound{𝒀}\AgdaSymbol{))}\<%
\\
\>[.][@{}l@{}]\<[187I]%
\>[15]\AgdaOperator{\AgdaFunction{∧}}\AgdaSpace{}%
\AgdaSymbol{((}\AgdaFunction{sub}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaInductiveConstructor{𝑣𝑎𝑙}\AgdaSpace{}%
\AgdaFunction{𝒛}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaFunction{𝒚}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaInductiveConstructor{𝑣𝑎𝑙}\AgdaSpace{}%
\AgdaFunction{𝒚}\AgdaSymbol{))}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{==}}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaInductiveConstructor{𝑐𝑜𝑛𝑠𝑡}\AgdaSpace{}%
\AgdaBound{𝑿}\AgdaSymbol{))}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{⟫}}\<%
\\
%
\>[15]\AgdaFunction{𝒚}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{:=}}\AgdaSpace{}%
\AgdaInductiveConstructor{𝑣𝑎𝑙}\AgdaSpace{}%
\AgdaFunction{𝒛}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{;}}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{⟪}}\AgdaSpace{}%
\AgdaFunction{POST}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{⟫}}\AgdaSpace{}%
\AgdaSymbol{→}\<%
\\
%
\>[15]\AgdaOperator{\AgdaFunction{⟪}}\AgdaSpace{}%
\AgdaFunction{A₁}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{⟫}}\AgdaSpace{}%
\AgdaFunction{𝒚}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{:=}}\AgdaSpace{}%
\AgdaInductiveConstructor{𝑣𝑎𝑙}\AgdaSpace{}%
\AgdaFunction{𝒛}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{;}}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{⟪}}\AgdaSpace{}%
\AgdaFunction{POST}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{⟫}}\<%
\\
%
\>[10]\AgdaFunction{go}\AgdaSpace{}%
\AgdaBound{t}\AgdaSpace{}%
\AgdaKeyword{with}\AgdaSpace{}%
\AgdaFunction{𝒚}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{?id=}}\AgdaSpace{}%
\AgdaFunction{𝒙}\<%
\\
%
\>[10]\AgdaFunction{go}\AgdaSpace{}%
\AgdaBound{t}\AgdaSpace{}%
\AgdaSymbol{|}\AgdaSpace{}%
\AgdaInductiveConstructor{yes}\AgdaSpace{}%
\AgdaBound{p}\AgdaSpace{}%
\AgdaKeyword{rewrite}\AgdaSpace{}%
\AgdaBound{p}\AgdaSpace{}%
\AgdaKeyword{with}\AgdaSpace{}%
\AgdaFunction{𝒙}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{?id=}}\AgdaSpace{}%
\AgdaFunction{𝒙}\<%
\\
%
\>[10]\AgdaFunction{go}\AgdaSpace{}%
\AgdaBound{t}\AgdaSpace{}%
\AgdaSymbol{|}\AgdaSpace{}%
\AgdaInductiveConstructor{yes}\AgdaSpace{}%
\AgdaBound{p}\AgdaSpace{}%
\AgdaSymbol{|}\AgdaSpace{}%
\AgdaInductiveConstructor{yes}\AgdaSpace{}%
\AgdaBound{q}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaBound{t}\<%
\\
%
\>[10]\AgdaFunction{go}\AgdaSpace{}%
\AgdaBound{t}\AgdaSpace{}%
\AgdaSymbol{|}\AgdaSpace{}%
\AgdaInductiveConstructor{yes}\AgdaSpace{}%
\AgdaBound{p}\AgdaSpace{}%
\AgdaSymbol{|}\AgdaSpace{}%
\AgdaInductiveConstructor{no}\AgdaSpace{}%
\AgdaBound{¬q}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaFunction{⊥-elim}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{¬q}\AgdaSpace{}%
\AgdaInductiveConstructor{refl}\AgdaSymbol{)}\<%
\\
%
\>[10]\AgdaFunction{go}\AgdaSpace{}%
\AgdaBound{t}\AgdaSpace{}%
\AgdaSymbol{|}\AgdaSpace{}%
\AgdaInductiveConstructor{no}\AgdaSpace{}%
\AgdaBound{¬p}\AgdaSpace{}%
\AgdaKeyword{with}\AgdaSpace{}%
\AgdaFunction{𝒚}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{?id=}}\AgdaSpace{}%
\AgdaFunction{𝒚}\<%
\\
%
\>[10]\AgdaFunction{go}\AgdaSpace{}%
\AgdaBound{t}\AgdaSpace{}%
\AgdaSymbol{|}\AgdaSpace{}%
\AgdaInductiveConstructor{no}\AgdaSpace{}%
\AgdaBound{¬p}\AgdaSpace{}%
\AgdaSymbol{|}\AgdaSpace{}%
\AgdaInductiveConstructor{yes}\AgdaSpace{}%
\AgdaBound{q}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaBound{t}\<%
\\
%
\>[10]\AgdaFunction{go}\AgdaSpace{}%
\AgdaBound{t}\AgdaSpace{}%
\AgdaSymbol{|}\AgdaSpace{}%
\AgdaInductiveConstructor{no}\AgdaSpace{}%
\AgdaBound{¬p}\AgdaSpace{}%
\AgdaSymbol{|}\AgdaSpace{}%
\AgdaInductiveConstructor{no}\AgdaSpace{}%
\AgdaBound{¬q}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaFunction{⊥-elim}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{¬q}\AgdaSpace{}%
\AgdaInductiveConstructor{refl}\AgdaSymbol{)}\<%
\end{code}